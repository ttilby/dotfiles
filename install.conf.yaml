- defaults:
    link:
      # removes old target if it's a symlink
      relink: true
      # create parent directories to the link as needed
      create: true

# check these directories for dead symlinks into dotfiles and remove them
- clean: ['~']

- create:
    - ~/bin
    - ~/Downloads
    - ~/vim/sessions
    - ~/vim/undodir

- shell:
    - ['git submodule update --init --recursive', 'Install submodules']
    - ['tic -xe alacritty,alacritty-direct Documents/alacritty.info', 'Setup terminfo']
    - ['[ ! -d "$HOME/.oh-my-zsh" ] && /bin/sh -c "$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)" || omz update', 'Setup oh-my-zsh']

# Install applications (Tmux, NeoVim, etc)
- shell:
    - ['bin/install-apps.sh', 'Installing Applications']

- link:
    ~/.config/:
      glob: true
      path: .config/*
    # ~/vim/sessions:
    #   glob: true
    #   path: vim/sessions/*
    ~/.themes/spaceship-prompt:
        path: .themes/spaceship-prompt
    ~/.tmux/pane-border-format.sh:
        path: .tmux/pane-border-format.sh
    ~/bin/ta: bin/ta
    ~/.aliases:
        path: .aliases
    ~/.cp_functions:
        path: .cp_functions
    ~/.exports:
        path: .exports
    ~/.functions:
        path: .functions
    ~/.gitconfig:
        path: .gitconfig
    ~/.pgpass:
        path: .pgpass
    ~/.tmux.conf:
        path: .tmux.conf
    ~/.zshrc:
        path: .zshrc
        force: true # installing oh-my-zsh will create a default .zhsrc file

- shell:
    # https://github.com/junegunn/vim-plug/wiki/tips#install-plugins-on-the-command-line
    # - ['nvim -es -u ~/.config/nvim/init.vim -i NONE -c "PlugInstall" -c "qa"', 'Installing NeoVim Plugins']
    # https://github.com/tmux-plugins/tpm/blob/master/docs/managing_plugins_via_cmd_line.md
    - ['~/.tmux/plugins/tpm/bin/install_plugins', 'Installing Tmux Plugins']
    - ['git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $HOME/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting', "Getting zsh-syntax-highlighting"]
    - ['git clone https://github.com/spaceship-prompt/spaceship-prompt.git $HOME/.oh-my-zsh/custom/themes/spaceship-prompt --depth=1', 'Getting Spaceship theme']
    - ['ln -s $HOME/.oh-my-zsh/custom/themes/spaceship-prompt/spaceship.zsh-theme $HOME/.oh-my-zsh/custom/themes/spaceship.zsh-theme', 'Setup Spaceship theme']
